Index: app/app.iml
===================================================================
--- app/app.iml	(revision 08ca20142f93577be2f4a6e05d34b2a88c0b7e48)
+++ app/app.iml	(revision 08ca20142f93577be2f4a6e05d34b2a88c0b7e48)
@@ -1,106 +0,0 @@
-<?xml version="1.0" encoding="UTF-8"?>
-<module external.linked.project.id=":app" external.linked.project.path="$MODULE_DIR$" external.root.project.path="$MODULE_DIR$/.." external.system.id="GRADLE" external.system.module.group="gyfty" external.system.module.version="unspecified" type="JAVA_MODULE" version="4">
-  <component name="FacetManager">
-    <facet type="android-gradle" name="Android-Gradle">
-      <configuration>
-        <option name="GRADLE_PROJECT_PATH" value=":app" />
-      </configuration>
-    </facet>
-    <facet type="android" name="Android">
-      <configuration>
-        <option name="SELECTED_BUILD_VARIANT" value="debug" />
-        <option name="SELECTED_TEST_ARTIFACT" value="_android_test_" />
-        <option name="ASSEMBLE_TASK_NAME" value="assembleDebug" />
-        <option name="COMPILE_JAVA_TASK_NAME" value="compileDebugSources" />
-        <option name="ASSEMBLE_TEST_TASK_NAME" value="assembleDebugAndroidTest" />
-        <option name="COMPILE_JAVA_TEST_TASK_NAME" value="compileDebugAndroidTestSources" />
-        <afterSyncTasks>
-          <task>generateDebugAndroidTestSources</task>
-          <task>generateDebugSources</task>
-        </afterSyncTasks>
-        <option name="ALLOW_USER_CONFIGURATION" value="false" />
-        <option name="MANIFEST_FILE_RELATIVE_PATH" value="/src/main/AndroidManifest.xml" />
-        <option name="RES_FOLDER_RELATIVE_PATH" value="/src/main/res" />
-        <option name="RES_FOLDERS_RELATIVE_PATH" value="file://$MODULE_DIR$/src/main/res" />
-        <option name="ASSETS_FOLDER_RELATIVE_PATH" value="/src/main/assets" />
-      </configuration>
-    </facet>
-  </component>
-  <component name="NewModuleRootManager" LANGUAGE_LEVEL="JDK_1_7" inherit-compiler-output="false">
-    <output url="file://$MODULE_DIR$/build/intermediates/classes/debug" />
-    <output-test url="file://$MODULE_DIR$/build/intermediates/classes/androidTest/debug" />
-    <exclude-output />
-    <content url="file://$MODULE_DIR$">
-      <sourceFolder url="file://$MODULE_DIR$/build/generated/source/r/debug" isTestSource="false" generated="true" />
-      <sourceFolder url="file://$MODULE_DIR$/build/generated/source/aidl/debug" isTestSource="false" generated="true" />
-      <sourceFolder url="file://$MODULE_DIR$/build/generated/source/buildConfig/debug" isTestSource="false" generated="true" />
-      <sourceFolder url="file://$MODULE_DIR$/build/generated/source/rs/debug" isTestSource="false" generated="true" />
-      <sourceFolder url="file://$MODULE_DIR$/build/generated/res/rs/debug" type="java-resource" />
-      <sourceFolder url="file://$MODULE_DIR$/build/generated/res/resValues/debug" type="java-resource" />
-      <sourceFolder url="file://$MODULE_DIR$/build/generated/source/r/androidTest/debug" isTestSource="true" generated="true" />
-      <sourceFolder url="file://$MODULE_DIR$/build/generated/source/aidl/androidTest/debug" isTestSource="true" generated="true" />
-      <sourceFolder url="file://$MODULE_DIR$/build/generated/source/buildConfig/androidTest/debug" isTestSource="true" generated="true" />
-      <sourceFolder url="file://$MODULE_DIR$/build/generated/source/rs/androidTest/debug" isTestSource="true" generated="true" />
-      <sourceFolder url="file://$MODULE_DIR$/build/generated/res/rs/androidTest/debug" type="java-test-resource" />
-      <sourceFolder url="file://$MODULE_DIR$/build/generated/res/resValues/androidTest/debug" type="java-test-resource" />
-      <sourceFolder url="file://$MODULE_DIR$/src/debug/res" type="java-resource" />
-      <sourceFolder url="file://$MODULE_DIR$/src/debug/resources" type="java-resource" />
-      <sourceFolder url="file://$MODULE_DIR$/src/debug/assets" type="java-resource" />
-      <sourceFolder url="file://$MODULE_DIR$/src/debug/aidl" isTestSource="false" />
-      <sourceFolder url="file://$MODULE_DIR$/src/debug/java" isTestSource="false" />
-      <sourceFolder url="file://$MODULE_DIR$/src/debug/jni" isTestSource="false" />
-      <sourceFolder url="file://$MODULE_DIR$/src/debug/rs" isTestSource="false" />
-      <sourceFolder url="file://$MODULE_DIR$/src/main/res" type="java-resource" />
-      <sourceFolder url="file://$MODULE_DIR$/src/main/resources" type="java-resource" />
-      <sourceFolder url="file://$MODULE_DIR$/src/main/assets" type="java-resource" />
-      <sourceFolder url="file://$MODULE_DIR$/src/main/aidl" isTestSource="false" />
-      <sourceFolder url="file://$MODULE_DIR$/src/main/java" isTestSource="false" />
-      <sourceFolder url="file://$MODULE_DIR$/src/main/com/gyfty" isTestSource="false" />
-      <sourceFolder url="file://$MODULE_DIR$/src/main/jni" isTestSource="false" />
-      <sourceFolder url="file://$MODULE_DIR$/src/main/rs" isTestSource="false" />
-      <sourceFolder url="file://$MODULE_DIR$/src/androidTest/res" type="java-test-resource" />
-      <sourceFolder url="file://$MODULE_DIR$/src/androidTest/resources" type="java-test-resource" />
-      <sourceFolder url="file://$MODULE_DIR$/src/androidTest/assets" type="java-test-resource" />
-      <sourceFolder url="file://$MODULE_DIR$/src/androidTest/aidl" isTestSource="true" />
-      <sourceFolder url="file://$MODULE_DIR$/src/androidTest/java" isTestSource="true" />
-      <sourceFolder url="file://$MODULE_DIR$/src/androidTest/jni" isTestSource="true" />
-      <sourceFolder url="file://$MODULE_DIR$/src/androidTest/rs" isTestSource="true" />
-      <excludeFolder url="file://$MODULE_DIR$/build/intermediates/assets" />
-      <excludeFolder url="file://$MODULE_DIR$/build/intermediates/bundles" />
-      <excludeFolder url="file://$MODULE_DIR$/build/intermediates/classes" />
-      <excludeFolder url="file://$MODULE_DIR$/build/intermediates/coverage-instrumented-classes" />
-      <excludeFolder url="file://$MODULE_DIR$/build/intermediates/dependency-cache" />
-      <excludeFolder url="file://$MODULE_DIR$/build/intermediates/dex" />
-      <excludeFolder url="file://$MODULE_DIR$/build/intermediates/dex-cache" />
-      <excludeFolder url="file://$MODULE_DIR$/build/intermediates/exploded-aar/com.android.support/appcompat-v7/23.0.0/jars" />
-      <excludeFolder url="file://$MODULE_DIR$/build/intermediates/exploded-aar/com.android.support/support-v4/23.0.0/jars" />
-      <excludeFolder url="file://$MODULE_DIR$/build/intermediates/incremental" />
-      <excludeFolder url="file://$MODULE_DIR$/build/intermediates/jacoco" />
-      <excludeFolder url="file://$MODULE_DIR$/build/intermediates/javaResources" />
-      <excludeFolder url="file://$MODULE_DIR$/build/intermediates/libs" />
-      <excludeFolder url="file://$MODULE_DIR$/build/intermediates/lint" />
-      <excludeFolder url="file://$MODULE_DIR$/build/intermediates/manifests" />
-      <excludeFolder url="file://$MODULE_DIR$/build/intermediates/ndk" />
-      <excludeFolder url="file://$MODULE_DIR$/build/intermediates/pre-dexed" />
-      <excludeFolder url="file://$MODULE_DIR$/build/intermediates/proguard" />
-      <excludeFolder url="file://$MODULE_DIR$/build/intermediates/res" />
-      <excludeFolder url="file://$MODULE_DIR$/build/intermediates/rs" />
-      <excludeFolder url="file://$MODULE_DIR$/build/intermediates/symbols" />
-      <excludeFolder url="file://$MODULE_DIR$/build/outputs" />
-    </content>
-    <orderEntry type="jdk" jdkName="Android API 23 Platform" jdkType="Android SDK" />
-    <orderEntry type="sourceFolder" forTests="false" />
-    <orderEntry type="library" exported="" name="ParseTwitterUtils-1.10.1" level="project" />
-    <orderEntry type="library" exported="" name="Parse-1.10.1" level="project" />
-    <orderEntry type="library" exported="" name="ParseFacebookUtilsV4-1.10.1" level="project" />
-    <orderEntry type="library" exported="" name="ParseCrashReporting-1.10.1" level="project" />
-    <orderEntry type="library" exported="" name="PPNS-1.10.1" level="project" />
-    <orderEntry type="library" exported="" name="bolts-android-1.2.1" level="project" />
-    <orderEntry type="library" exported="" name="guava-14.0.1" level="project" />
-    <orderEntry type="library" exported="" name="bolts-android-1.2.1-javadoc" level="project" />
-    <orderEntry type="library" exported="" name="lombok-1.12.6" level="project" />
-    <orderEntry type="library" exported="" name="appcompat-v7-23.0.0" level="project" />
-    <orderEntry type="library" exported="" name="support-v4-23.0.0" level="project" />
-    <orderEntry type="library" exported="" name="support-annotations-23.0.0" level="project" />
-  </component>
-</module>
\ No newline at end of file
Index: app/src/main/java/com/gyfty/promotions/Promotion.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/src/main/java/com/gyfty/promotions/Promotion.java	(revision 08ca20142f93577be2f4a6e05d34b2a88c0b7e48)
+++ app/src/main/java/com/gyfty/promotions/Promotion.java	(revision )
@@ -2,6 +2,7 @@
 
 import com.gyfty.products.GyftyProduct;
 import com.gyfty.cart.ProductPriceRow;
+import com.gyfty.products.GyftyProductInterface;
 
 import java.util.Date;
 
@@ -30,7 +31,7 @@
 
     public void setIsActive(Boolean value);
 
-    public boolean isApplicable(GyftyProduct product);
+    public boolean isApplicable(GyftyProductInterface product);
 
     public void setVendorPayment(ProductPriceRow row);
 
Index: settings.gradle
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- settings.gradle	(revision 08ca20142f93577be2f4a6e05d34b2a88c0b7e48)
+++ settings.gradle	(revision )
@@ -1,1 +1,1 @@
-include ':app'
\ No newline at end of file
Index: .idea/misc.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- .idea/misc.xml	(revision 08ca20142f93577be2f4a6e05d34b2a88c0b7e48)
+++ .idea/misc.xml	(revision )
@@ -37,7 +37,7 @@
     <ConfirmationsSetting value="0" id="Add" />
     <ConfirmationsSetting value="0" id="Remove" />
   </component>
-  <component name="ProjectRootManager" version="2" languageLevel="JDK_1_7" default="true" assert-keyword="true" jdk-15="true" project-jdk-name="1.8" project-jdk-type="JavaSDK">
+  <component name="ProjectRootManager" version="2" languageLevel="JDK_1_8" default="true" assert-keyword="true" jdk-15="true" project-jdk-name="1.8" project-jdk-type="JavaSDK">
     <output url="file://$PROJECT_DIR$/build/classes" />
   </component>
   <component name="ProjectType">
\ No newline at end of file
Index: app/src/main/java/com/gyfty/promotions/VendorPromotion.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/src/main/java/com/gyfty/promotions/VendorPromotion.java	(revision 08ca20142f93577be2f4a6e05d34b2a88c0b7e48)
+++ app/src/main/java/com/gyfty/promotions/VendorPromotion.java	(revision )
@@ -1,7 +1,7 @@
 package com.gyfty.promotions;
 
-import com.gyfty.products.GyftyProduct;
 import com.gyfty.cart.ProductPriceRow;
+import com.gyfty.products.GyftyProductInterface;
 import com.gyfty.vendor.Vendor;
 import com.parse.ParseClassName;
 
@@ -22,7 +22,7 @@
     }
 
 
-    public boolean isApplicable(GyftyProduct product) {
+    public boolean isApplicable(GyftyProductInterface product) {
 
         if (getIsActive() && getActor().getObjectId().equals(product.getObjectId())) {
 
Index: app/src/main/java/com/gyfty/cart/CartGyftyProduct.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/src/main/java/com/gyfty/cart/CartGyftyProduct.java	(revision 08ca20142f93577be2f4a6e05d34b2a88c0b7e48)
+++ app/src/main/java/com/gyfty/cart/CartGyftyProduct.java	(revision )
@@ -1,10 +1,25 @@
 package com.gyfty.cart;
 
 import com.gyfty.products.GyftyProduct;
+import com.gyfty.products.GyftyProductInterface;
 
+import lombok.Data;
+
 /**
  * Created by akhilch on 9/28/2015.
  */
-public class CartGyftyProduct extends GyftyProduct {
+
+@Data
+public class CartGyftyProduct extends GyftyProduct implements GyftyProductInterface {
+
+    /**
+     *
+     */
+    public CartGyftyProduct(GyftyProduct product) {
+        super();
+    }
+
+    private GyftyProduct product;
+
 
 }
Index: .idea/gradle.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- .idea/gradle.xml	(revision 08ca20142f93577be2f4a6e05d34b2a88c0b7e48)
+++ .idea/gradle.xml	(revision )
@@ -5,12 +5,11 @@
       <GradleProjectSettings>
         <option name="distributionType" value="LOCAL" />
         <option name="externalProjectPath" value="$PROJECT_DIR$" />
-        <option name="gradleHome" value="$APPLICATION_HOME_DIR$/gradle/gradle-2.4" />
+        <option name="gradleHome" value="C:\Program Files\Android\Android Studio\gradle\gradle-2.4" />
         <option name="gradleJvm" value="1.8" />
         <option name="modules">
           <set>
             <option value="$PROJECT_DIR$" />
-            <option value="$PROJECT_DIR$/app" />
           </set>
         </option>
       </GradleProjectSettings>
\ No newline at end of file
Index: app/src/main/java/com/gyfty/promotions/ProductPromotion.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/src/main/java/com/gyfty/promotions/ProductPromotion.java	(revision 08ca20142f93577be2f4a6e05d34b2a88c0b7e48)
+++ app/src/main/java/com/gyfty/promotions/ProductPromotion.java	(revision )
@@ -2,6 +2,7 @@
 
 import com.gyfty.products.GyftyProduct;
 import com.gyfty.cart.ProductPriceRow;
+import com.gyfty.products.GyftyProductInterface;
 import com.parse.ParseClassName;
 
 /**
@@ -20,11 +21,9 @@
     }
 
     @Override
-    public boolean isApplicable(GyftyProduct product) {
+    public boolean isApplicable(GyftyProductInterface product) {
        if(getIsActive() && getActor().getObjectId().equals(product.getObjectId())){
-
            return true;
-
        }
         return false;
     }
Index: .idea/modules.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- .idea/modules.xml	(revision 08ca20142f93577be2f4a6e05d34b2a88c0b7e48)
+++ .idea/modules.xml	(revision )
@@ -2,7 +2,7 @@
 <project version="4">
   <component name="ProjectModuleManager">
     <modules>
-      <module fileurl="file://$PROJECT_DIR$/app/app.iml" filepath="$PROJECT_DIR$/app/app.iml" />
+      <module fileurl="file://$PROJECT_DIR$/gyfty.iml" filepath="$PROJECT_DIR$/gyfty.iml" />
       <module fileurl="file://$PROJECT_DIR$/gyfty.iml" filepath="$PROJECT_DIR$/gyfty.iml" />
     </modules>
   </component>
\ No newline at end of file
Index: app/src/main/java/com/gyfty/cart/ProductPriceRow.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/src/main/java/com/gyfty/cart/ProductPriceRow.java	(revision 08ca20142f93577be2f4a6e05d34b2a88c0b7e48)
+++ app/src/main/java/com/gyfty/cart/ProductPriceRow.java	(revision )
@@ -5,7 +5,6 @@
 /**
  * Created by Mac on 9/27/15.
  */
-
 public class ProductPriceRow {
 
     GyftyProduct product;
@@ -39,18 +38,6 @@
     public void setPromotionDiscount(double promotionDiscount){
 
         this.promotionDiscount = promotionDiscount;
-
-    }
-
-    public double getCommisionAmount() {
-
-        return commisionAmount;
-
-    }
-
-    public void setCommisionAmount(double commisionAmount){
-
-        this.commisionAmount = commisionAmount;
 
     }
 
Index: app/src/main/java/com/gyfty/promotions/CartPromotion.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/src/main/java/com/gyfty/promotions/CartPromotion.java	(revision 08ca20142f93577be2f4a6e05d34b2a88c0b7e48)
+++ app/src/main/java/com/gyfty/promotions/CartPromotion.java	(revision )
@@ -3,6 +3,8 @@
 import com.gyfty.cart.Cart;
 import com.gyfty.products.GyftyProduct;
 import com.gyfty.cart.ProductPriceRow;
+import com.gyfty.cart.Cart;
+import com.gyfty.products.GyftyProductInterface;
 
 /**
  * Created by Mac on 9/21/15.
Index: app/src/main/java/com/gyfty/promotions/CategoryPromotion.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/src/main/java/com/gyfty/promotions/CategoryPromotion.java	(revision 08ca20142f93577be2f4a6e05d34b2a88c0b7e48)
+++ app/src/main/java/com/gyfty/promotions/CategoryPromotion.java	(revision )
@@ -2,6 +2,7 @@
 
 import com.gyfty.cart.ProductPriceRow;
 import com.gyfty.category.Category;
+import com.gyfty.products.GyftyProductInterface;
 import com.gyfty.products.GyftyProduct;
 import com.parse.ParseClassName;
 
@@ -9,6 +10,7 @@
  * Created by Mac on 9/21/15.
  */
 
+
 @ParseClassName("CategoryPromotion")
 public class CategoryPromotion extends PercentPromotion {
 
@@ -21,13 +23,13 @@
     }
 
     @Override
-    public boolean isApplicable(GyftyProduct product) {
-        return false;
+    public boolean isApplicable(GyftyProductInterface product) {
+       return product.getCategory().getCategory().equals(getActor().getCategory());
     }
 
     @Override
     public void setVendorPayment(ProductPriceRow row) {
-
+        //Need to be written
     }
 
 
Index: app/src/main/java/com/gyfty/products/GyftyProductInterface.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/src/main/java/com/gyfty/products/GyftyProductInterface.java	(revision )
+++ app/src/main/java/com/gyfty/products/GyftyProductInterface.java	(revision )
@@ -0,0 +1,15 @@
+package com.gyfty.products;
+
+import com.gyfty.category.Category;
+
+/**
+ * Created by akhilch on 10/3/2015.
+ */
+public interface GyftyProductInterface {
+
+    double getPrice();
+    Category getCategory();;
+    String getObjectId();
+
+
+}
\ No newline at end of file
Index: app/src/main/java/com/gyfty/cart/Cart.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/src/main/java/com/gyfty/cart/Cart.java	(revision 08ca20142f93577be2f4a6e05d34b2a88c0b7e48)
+++ app/src/main/java/com/gyfty/cart/Cart.java	(revision )
@@ -131,6 +131,11 @@
         public void addProductToCart(Cart cart, GyftyProduct product) {
 
             cart.addProduct(product);
+            double price = product.getPrice();
+            double commisionAmount = product.getVendor().getCommisionPercentage() * price/100;
+            double vendorPayment = price - commisionAmount;
+            double priceAfterDiscount = price;
+            ProductPriceRow pprow = new ProductPriceRow(new CartGyftyProduct(product), 0.0, commisionAmount, vendorPayment, priceAfterDiscount, null);
             cart.saveEventually();
 
         }
